<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login Registration</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    
    <style>
        /* Custom CSS for the registration page */
        body {
            background-color: #f0f0f0;
            background-image: url('https://ehospital.gov.in/ehospitalsso/assets/assets_new_login/img/abha1-1.jpg');
            background-size: cover;
            background-repeat: no-repeat;
        }
        .registration {
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .bg-image {
            background-image: url('https://ehospital.gov.in/ehospitalsso/assets/assets_new_login/img/abha1-1.jpg'); /* Update the background image URL */
            background-size: cover;
            background-position: center;
            height: 100%;
        }

        .registration-heading {
            font-weight: 300;
            color: #333;
        }

        /* Custom styles for the registration form */
        .registration-form {
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            max-width: 800px; /* Increase the form width as needed */
            width: 100%; /* Ensure the form takes the full available width */
        }

        /* Style for error messages */
        .error-message {
            color: red;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="registration">
            <div class="registration-form">
                <h3 class="registration-heading mb-4">Patient Registration</h3>

                <!-- Registration Form -->
                <form action="#" id="userregistrationform" method="POST">
                    {% csrf_token %}
                    {% comment %} <div class="mb-3">
                        <label for="role" style=" margin-top: 15px;">Role:</label>
                        <select id="role" class="custom-select" name="role" style="  background-color: rgba(255, 255, 255, 0.07);  ">
                          <option value="staff">Patient</option>
                          <option value="player">Doctor</option>
                         </select>
                    </div> {% endcomment %}
                    <div class="mb-3">
                        <label for="username" class="form-label">Username</label>
                        <input type="text" class="form-control" id="username" name="username" required oninput="validateUsername()">
                        <div class="error-message" id="username-error"></div>
                    </div>
                    <div class="mb-3">
                        <label for="username" class="form-label">FirstName</label>
                        <input type="text" class="form-control" id="firstname" name="firstname" required oninput="validateUsername()">
                        <div class="error-message" id="username-error"></div>
                    </div>
                    <div class="mb-3">
                        <label for="username" class="form-label">Lastname</label>
                        <input type="text" class="form-control" id="lastname" name="lastname" required oninput="validateUsername()">
                        <div class="error-message" id="username-error"></div>
                    </div>
                    {% comment %} <div class="mb-3">
                        <label for="fullname" class="form-label">Full Name</label>
                        <input type="text" class="form-control" id="fullname" name="fullname" required oninput="validateFullName()">
                        <div class="error-message" id="fullname-error"></div>
                    </div> {% endcomment %}
                    <div class="mb-3">
                        <label for="playerAge">Date of birth:</label>
                        <input type="date" placeholder="Select DOB" name="dob" id="dob" >
                    </div>
                    <div class="mb-3">
                        <label for="email" class="form-label">Email</label>
                        <input type="email" class="form-control" id="email" name="email" required oninput="validateEmail()">
                        <div class="error-message" id="email-error"></div>
                    </div>
                    <div class="mb-3">
                        <label for="password" class="form-label">Password</label>
                        <input type="password" class="form-control" id="password" name="password" required oninput="validatePassword()">
                        <div class="error-message" id="password-error"></div>
                    </div>
                    <div class="mb-3">
                        <label for="confirmPassword" class="form-label">Confirm Password</label>
                        <input type="password" class="form-control" id="confirmPassword" name="confirmPassword" required oninput="validateConfirmPassword()">
                        <div class="error-message" id="confirmPassword-error"></div>
                    </div>

                    <div class="d-grid">
                        <button class="btn btn-lg btn-primary text-uppercase fw-bold mb-2" type="submit">Register</button>
                    </div>
                </form>
                <p class="login">Already have an account? <a href="{% url 'login' %}">Login</a></p>
            </div>
        </div>
    </div>

    <script>
        // Validation functions
        function validateUsername() {
            const usernameInput = document.getElementById("username");
            const usernameError = document.getElementById("username-error");

            // Validation for username
            // Example: Username should be alphanumeric and have at least 5 characters.
            const isValid = /^[a-zA-Z0-9]{5,}$/.test(usernameInput.value);

            if (!isValid) {
                usernameError.textContent = "Username should be alphanumeric and have at least 5 characters.";
            } else {
                usernameError.textContent = "";
            }
        }

        function validateFullName() {
            const fullnameInput = document.getElementById("fullname");
            const fullnameError = document.getElementById("fullname-error");

            // Validation for full name
            // Example: Full Name should start with a capital letter and can contain spaces.
            const isValid = /^[A-Z][a-zA-Z\s]*$/.test(fullnameInput.value);

            if (!isValid) {
                fullnameError.textContent = "Full Name should start with a capital letter and can contain spaces.";
            } else {
                fullnameError.textContent = "";
            }
        }

        function validateEmail() {
            const emailInput = document.getElementById("email");
            const emailError = document.getElementById("email-error");

            // Validation for email
            // Example: Validate email format.
            const isValid = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(emailInput.value);

            if (!isValid) {
                emailError.textContent = "Please enter a valid email address.";
            } else {
                emailError.textContent = "";
            }
        }

        function validatePassword() {
            const passwordInput = document.getElementById("password");
            const passwordError = document.getElementById("password-error");

            // Validation for password
            // Example: Password should have at least 8 characters.
            const isValid = passwordInput.value.length >= 8;

            if (!isValid) {
                passwordError.textContent = "Password should have at least 8 characters.";
            } else {
                passwordError.textContent = "";
            }
        }

        function validateConfirmPassword() {
            const passwordInput = document.getElementById("password");
            const confirmPasswordInput = document.getElementById("confirmPassword");
            const confirmPasswordError = document.getElementById("confirmPassword-error");

            // Validation for confirming password
            // Example: Check if passwords match.
            const isValid = passwordInput.value === confirmPasswordInput.value;

            if (!isValid) {
                confirmPasswordError.textContent = "Passwords do not match.";
            } else {
                confirmPasswordError.textContent = "";
            }
        }

        // Function to validate the registration form
        function validateRegistrationForm() {
            // ... (the same validation logic used for real-time validation) ...
        }

        // Attach the validation function to the form's submit event
        document.querySelector("#userregistrationform").addEventListener('submit', (e) => {
            if (!validateRegistrationForm()) {
                e.preventDefault(); // Prevent form submission if validation fails
            }
        });
    </script> 
</body>
</html>